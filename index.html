<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>Codeless Platform</title>
  <link rel="stylesheet" href="dist/css/grapes.min.css" />
  <link rel="icon" href="svgviewer-png-output .png" type="image/x-icon" />
  <script src="grapes.min.js"></script>
  <script src="./dist/grapesjs-script-editor.min.js"></script>
  <script src="./dist/grapesjs-tailwind.min.js"></script>
  <script src="./dist/grapesjs-plugin-forms/dist/index.js"></script>
  <script src="./dist/grapesjs-parser-postcss/dist/index.js"></script>
  <script src="./dist/plugin-export-to-zip.js"></script>
  <script src="./dist/plugin-basic-blocks.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>
  <script src="./Blocks/Login.js"></script>
  <script src="./Blocks/Company1.js"></script>
  <script src="./Blocks/Company2.js"></script>
  <script src="./Blocks/Company3.js"></script>
  <script src="./Blocks/Company4.js"></script>
  <script src="./Blocks/Portofolio.js"></script>
  <script src="./Blocks/Company5.js"></script>
  <script src="./Blocks/signup.js"></script>
  <script src="./Blocks/carousel.js"></script>
  <script src="./Blocks/tailwind.js"></script>
  <script src="./plugins/saveFile.js"></script>
  <script src="./plugins/openFile.js"></script>
  <script src="./plugins/clearPage.js"></script>
  <script src="./plugins/addPagePlugin.js"></script>
  <script src="./plugins/deletePagePlugin.js"></script>
  <script src="./plugins/undo_redo.js"></script>
  <style>
    body,
    html {
      height: 100%;
      margin: 0;
    }
  </style>
</head>

<body>
  <div id="gjs" style="height: 0px; overflow: hidden">
    <div class="panel">
      <h1 class="welcome">Welcome to</h1>
      <div class="big-title">
        <svg width="90" height="90">
          <path
            d="M40 5l-12.9 7.4 -12.9 7.4c-1.4 0.8-2.7 2.3-3.7 3.9 -0.9 1.6-1.5 3.5-1.5 5.1v14.9 14.9c0 1.7 0.6 3.5 1.5 5.1 0.9 1.6 2.2 3.1 3.7 3.9l12.9 7.4 12.9 7.4c1.4 0.8 3.3 1.2 5.2 1.2 1.9 0 3.8-0.4 5.2-1.2l12.9-7.4 12.9-7.4c1.4-0.8 2.7-2.2 3.7-3.9 0.9-1.6 1.5-3.5 1.5-5.1v-14.9 -12.7c0-4.6-3.8-6-6.8-4.2l-28 16.2" />
        </svg>
        Codeless Platform
      </div>
      <div class="description">
        Codeless empowers users to build websites or applications without
        needing in-depth coding knowledge. It utilizes a drag-and-drop
        interface, allowing users to visually design the front-end of their
        websites or apps by placing elements like buttons, text boxes, images,
        and forms onto a canvas, in addition to the ability for users to
        export the generated code, users gain access to the HTML and CSS that
        comprise their website's structure and styling.
      </div>
    </div>
    <style>
      .panel {
        width: 90%;
        max-width: 700px;
        border-radius: 3px;
        padding: 30px 20px;
        margin: 150px auto 0px;
        background-color: #343281;
        box-shadow: 0px 3px 10px 0px rgba(231, 25, 25, 0);
        color: rgba(255, 255, 255, 0.823);
        font: caption;
        font-weight: 100;
      }

      .welcome {
        text-align: center;
        font-weight: 100;
        margin: 0px;
      }

      .logo {
        width: 70px;
        height: 70px;
        vertical-align: middle;
      }

      .logo path {
        pointer-events: none;
        fill: none;
        stroke-linecap: round;
        stroke-width: 7;
        stroke: #fff;
      }

      .big-title {
        text-align: center;
        font-size: 3.5rem;
        margin: 15px 0;
      }

      svg {
        display: inline;
        vertical-align: center;
        fill: white;
      }

      .description {
        text-align: justify;
        font-size: 1rem;
        line-height: 1.5rem;
      }
    </style>
  </div>

  <script type="text/javascript">

    var editor = grapesjs.init({
      showOffsets: 1,
      noticeOnUnload: 0,
      container: "#gjs",
      allowScripts: 1,
      fromElement: true,
      plugins: [
        "grapesjs-plugin-export",
        "gjs-blocks-basic",
        "grapesjs-tailwind",
        "grapesjs-plugin-forms",
        "grapesjs-script-editor",
        "grapesjs-parser-postcss",
        "login",
        "company1",
        "company2",
        "company3",
        "company4",
        "company5",
        "portofolio",
        "signup",
        "carousel",
        "tailwind",
        "clearPage",
        "undo_redo",
        "addPagePlugin",
        "deletePagePlugin",
        "saveFile",
        "openFile",
      ],
      pluginsOpts: {
        "grapesjs-plugin-export": {},
        "saveFile": {},
        "openFile": {},
        "gjs-blocks-basic": {},
        "grapesjs-tailwind": {},
        "grapesjs-plugin-forms": {},
        "grapesjs-script-editor": {},
        "grapesjs-parser-postcss": {},
        "login": {},
        "company1": {},
        "company2": {},
        "company3": {},
        "company4": {},
        "company5": {},
        "portofolio": {},
        "signup": {},
        "carousel": {},
        "tailwind": {},
        "clearPage": {},
        "addPagePlugin": {},
        "deletePagePlugin": {},
        "undo_redo": {}
      },
      canvas: {
        styles: [
          "https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css",
          "https://cdn.tailwindcss.com",
        ],
        scripts: [
          "https://code.jquery.com/jquery-3.3.1.slim.min.js",
          "https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js",
          "https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js",
        ],
      },

      height: "100%",
      fromElement: true,
      storageManager: { autoload: 0 },
      styleManager: {
        sectors: [
          {
            name: "General",
            open: false,
            buildProps: [
              "float",
              "display",
              "position",
              "top",
              "right",
              "left",
              "bottom",
            ],
          },
          {
            name: "Flex",
            open: false,
            buildProps: [
              "flex-direction",
              "flex-wrap",
              "justify-content",
              "align-items",
              "align-content",
              "order",
              "flex-basis",
              "flex-grow",
              "flex-shrink",
              "align-self",
            ],
          },
          {
            name: "Dimension",
            open: false,
            buildProps: [
              "width",
              "height",
              "max-width",
              "min-height",
              "margin",
              "padding",
            ],
          },
          {
            name: "Typography",
            open: false,
            buildProps: [
              "font-family",
              "font-size",
              "font-weight",
              "letter-spacing",
              "color",
              "line-height",
              "text-shadow",
            ],
          },
          {
            name: "Decorations",
            open: false,
            buildProps: [
              "border-radius-c",
              "background-color",
              "border-radius",
              "border",
              "box-shadow",
              "background",
            ],
          },
          {
            name: "Extra",
            open: false,
            buildProps: ["transition", "perspective", "transform"],
          },
        ],
      },
    });
    //first create an object from panels
    const panelManager = editor.Panels;
    const pageManager = editor.Pages;
    //add export to zip button to options panel
    const export_btn = panelManager.addButton("options", {
      id: "export_to_zip",
      className: "fa fa-download",
      command: "export",
      attributes: { title: "Export to zip" },
    });
    //add commands to the button
    editor.Commands.add("export", {
      run: (editor) => editor.runCommand("gjs-export-zip"),
    });

    function addPagesToSettingsPanel(editor) {
      const panels = editor.Panels;

      // Get the container panel where "Traits" panel is located
      const containerPanel = panels.getPanel("views-container");

      // Create the Pages panel with the settings panel style
      const pagesPanel = panels.addPanel({
        id: "pages-panel",
        visible: true,
        className: "settings-panel",
        buttons: [
          {
            id: "show-pages",
            className: "fa fa-list",
            command: "show-pages",
            attributes: { title: "Show Pages" },
          },
        ],
      });

      // Define the command to show the Pages panel
      editor.Commands.add("show-pages", {
        run: function (editor, sender) {
          pagesPanel.set("visible", !pagesPanel.get("visible"));
        },
      });

      // Function to update the content of the Pages panel
      function updatePagesList() {
        const pages = editor.Pages.getAll();
        const pagesList = pages.map((page) => `<li>${page.id}</li>`).join("");
        pagesPanel.set("content", `<ul>${pagesList}</ul>`);
      }
      console.log(panels);

      // Initial update of the Pages panel
      updatePagesList();

      // Listen to changes in pages and update the panel accordingly
      editor.on("pageAdded pageRemoved", updatePagesList);

      // Append the Pages panel to the container panel
      // containerPanel.set('appendContent', pagesPanel.render().el);
    }

    // Add the Pages panel to the editor
    addPagesToSettingsPanel(editor);




    // toggle free move component
    editor.Commands.add('toggle-abs-move', {
      run: function (editor, sender) {
        var selectedComponent = editor.getSelected();
        if (selectedComponent) {
          if (selectedComponent.get('dmode') === 'translate') {
            selectedComponent.setDragMode();
            var prevPosition = selectedComponent.get('_prev-abs');
            if (prevPosition) {
              selectedComponent.addStyle({
                position: prevPosition,
                transform: ''
              });
              selectedComponent.set('_prev-abs', 0);
            } else {
              selectedComponent.addStyle({
                position: '',
                transform: ''
              });
            }
          }
          else {
            selectedComponent.setDragMode('translate');
            var currentPosition = selectedComponent.getStyle().position;
            if (currentPosition !== 'absolute') {
              if (currentPosition) {
                selectedComponent.set('_prev-abs', currentPosition);
              }

              if (selectedComponent.get('tagName') === 'a') {
                selectedComponent.addStyle({
                  position: 'absolute'
                });
                return; // Stop execution here if the selected component is a link
              }



            }
          }
        }
      }
    });




  </script>
</body>

</html>